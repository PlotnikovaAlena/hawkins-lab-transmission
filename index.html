<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hawkins National Laboratory ‚Äì Final Transmission</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
  :root{
    --green: #36ff8a;
    --green-dim:#24c36a;
    --bg: #000;
  }
  html,body{
    height:100%; margin:0;
    background:#000; color:var(--green);
    font-family:"VT323", monospace;
  }
  .crt{
    min-height:100%;
    box-sizing:border-box;
    padding:8vh 8vw;
    position:relative;
    line-height:1.4;
    text-shadow:0 0 6px rgba(54,255,138,.55),0 0 10px rgba(54,255,138,.35);
    animation:flicker 6s infinite;
    overflow:hidden;
  }
  /* scanlines + vignette */
  .crt:before{
    content:""; position:absolute; inset:0;
    background:
      repeating-linear-gradient(0deg, rgba(255,255,255,.025) 0px, rgba(255,255,255,.025) 1px, transparent 2px, transparent 3px),
      radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,.08) 60%, rgba(0,0,0,.25) 100%);
    pointer-events:none; mix-blend-mode:screen;
  }
  @keyframes flicker{ 0%,100%{opacity:.98} 50%{opacity:1} 60%{opacity:.985} 80%{opacity:1} }

  .terminal{ font-size:clamp(14px,3.2vw,22px); }
  .line{ white-space:pre-wrap; }
  .cursor{ display:inline-block; width:.8ch; animation:blink 1s steps(1) infinite; }
  @keyframes blink{ 0%,50%{opacity:1} 50.1%,100%{opacity:0} }

  .ru-note{
    color:var(--green-dim); margin-top:12px;
    font-size:clamp(12px,2.6vw,18px);
    opacity:0; transition:opacity 900ms ease;
  }

  /* Start overlay */
  .overlay{
    position:fixed; inset:0; background:#000; display:flex;
    align-items:center; justify-content:center; flex-direction:column;
    gap:12px; z-index:10;
  }
  .overlay h2{ margin:0; font-size:clamp(18px,5vw,28px); }
  .overlay p{ margin:0; color:var(--green-dim); font-size:clamp(12px,3.2vw,16px); }
  .btn{
    margin-top:10px; padding:.6rem 1.2rem; border:1px solid var(--green);
    color:var(--green); background:transparent; font-family:"VT323", monospace;
    font-size:clamp(14px,4vw,18px); cursor:pointer;
    text-shadow:0 0 6px rgba(54,255,138,.55);
  }
  .btn:active{ transform:scale(.98); }

  @media (max-width:400px){ .crt{ padding:6vh 6vw; } }
</style>
</head>
<body>
  <!-- Start overlay (tap to enable audio & start typing) -->
  <div class="overlay" id="overlay">
    <h2>HAWKINS NATIONAL LABORATORY</h2>
    <p>Secure Channel 11 ready.</p>
    <button class="btn" id="startBtn">Tap to begin transmission</button>
    <p>(sound enabled)</p>
  </div>

  <div class="crt">
    <!-- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫-—Å—Ç—Ä–æ–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ -->
    <div id="terminal" class="terminal" role="status" aria-live="polite"></div>
    <div id="ruNote" class="ru-note">‚Äî –ü–µ—Ä–µ–¥–∞–Ω–æ –ò–∑–∞–±–µ–ª–ª–µ, 2 –Ω–æ—è–±—Ä—è 2025 –≥–æ–¥–∞. –•–æ—É–∫–∏–Ω—Å, –ò–Ω–¥–∏–∞–Ω–∞.</div>
  </div>

<script>
const LINES = [
  "HAWKINS NATIONAL LABORATORY ‚Äì FINAL TRANSMISSION",
  "Date: November 2, 1985",
  "Subject: Isabella Plotnikova",
  "",
  "The Gate is closed.",
  "Energy levels have stabilized.",
  "Hawkins is safe again thanks to your courage.",
  "",
  "You have completed your mission with honor.",
  "The Department of Energy recognizes your bravery.",
  "",
  "Happy Birthday, Isabella!",
  "",
  "  * * * * * * * * * * * * * * * * * * *",
  "     –° –î–ù–Å–ú –†–û–ñ–î–ï–ù–ò–Ø, –ò–ó–ê–ë–ï–õ–õ–ê!",
  "  * * * * * * * * * * * * * * * * * * *",
  "",
  "Dr. Sam Owens",
  "Director, Hawkins National Laboratory",
  "U.S. Department of Energy",
  "",
  "Your friends from Hawkins Laboratory.",
  "",
  "TRANSMISSION COMPLETE..."
];

const term = document.getElementById('terminal');
const ru = document.getElementById('ruNote');
const overlay = document.getElementById('overlay');
const startBtn = document.getElementById('startBtn');
const cursor = document.createElement('span');
cursor.className = 'cursor'; cursor.textContent = "_";

let li = 0, ci = 0;
let lineEl;

function newLine(){
  const el = document.createElement('div');
  el.className = 'line';
  term.appendChild(el);
  return el;
}
function delay(min, max){ return Math.floor(min + Math.random()*(max-min)); }

function typeNext(){
  if(li >= LINES.length){
    endBeep();
    setTimeout(()=>{
      ru.style.opacity = 1;
      finalBeep(); // <--- –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è
    }, 1200);
    return;
  }
  const text = LINES[li];
  if(ci < text.length){
    lineEl.textContent += text.charAt(ci++);
    if(text.charAt(ci-1) !== " ") keyClick();
    setTimeout(typeNext, delay(14, 42));
  } else {
    term.removeChild(cursor);
    lineEl = newLine();
    term.appendChild(cursor);
    li++; ci = 0;
    setTimeout(typeNext, text.trim()==="" ? delay(90,160) : delay(260,520));
    window.scrollTo(0, document.body.scrollHeight);
  }
}

/* ===== AUDIO SYSTEM ===== */
let audioCtx, hissNode, hissGain;

function startAudio(){
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  // White noise background
  const bufferSize = 2 * audioCtx.sampleRate;
  const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const output = noiseBuffer.getChannelData(0);
  for(let i=0;i<bufferSize;i++){ output[i] = (Math.random()*2-1) * 0.03; }
  hissNode = audioCtx.createBufferSource();
  hissNode.buffer = noiseBuffer; hissNode.loop = true;
  hissGain = audioCtx.createGain(); hissGain.gain.value = 0.12;
  hissNode.connect(hissGain).connect(audioCtx.destination);
  hissNode.start();

  // Boot-up zap
  bootZap();
}

function bootZap(){
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "sawtooth";
  o.frequency.setValueAtTime(120, audioCtx.currentTime);
  o.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 0.25);
  g.gain.value = 0.0001;
  o.connect(g).connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.08, audioCtx.currentTime + 0.05);
  g.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.35);
  o.stop(audioCtx.currentTime + 0.36);
}

function keyClick(){
  if(!audioCtx) return;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "square";
  o.frequency.value = 580 + Math.random()*120;
  g.gain.value = 0.0001;
  o.connect(g).connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.05, audioCtx.currentTime + 0.003);
  g.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.04);
  o.stop(audioCtx.currentTime + 0.05);
}

function endBeep(){
  if(!audioCtx) return;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "triangle";
  o.frequency.value = 880;
  g.gain.value = 0.0001;
  o.connect(g).connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.07, audioCtx.currentTime + 0.02);
  g.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.25);
  o.stop(audioCtx.currentTime + 0.26);
}

/* üéµ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª –ø—Ä–∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–∏ */
function finalBeep(){
  if(!audioCtx) return;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "sine";
  o.frequency.setValueAtTime(660, audioCtx.currentTime);
  o.frequency.exponentialRampToValueAtTime(440, audioCtx.currentTime + 0.5);
  g.gain.value = 0.0001;
  o.connect(g).connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.08, audioCtx.currentTime + 0.02);
  g.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.6);
  o.stop(audioCtx.currentTime + 0.62);
}

/* ===== START TRANSMISSION ===== */
function startTransmission(){
  overlay.style.display = "none";
  try{ startAudio(); }catch(e){}
  lineEl = newLine();
  term.appendChild(cursor);
  setTimeout(typeNext, 600);
}

startBtn.addEventListener('click', startTransmission, {once:true});
startBtn.addEventListener('touchstart', startTransmission, {once:true});
</script>
</body>
</html>
